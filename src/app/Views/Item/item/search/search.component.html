<!--<p-button (click)="display=false; showModal()" >Abrir caja </p-button>  -->
<p-button (click)="display=false; showModal()" icon="fa fa-search"></p-button>
  <!--Form Add -->
  <p-dialog header="Buscar producto/servicio" [(visible)]="display"
    [modal]="true" [responsive]="true" showEffect="fade" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '80vw'}">
    <form >
    <!-- Header-->
    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col-6">
          <p-autoComplete [(ngModel)]="proveedor" [suggestions]="proveedoresFiltrados" (completeMethod)="filtradoProveedor($event)"
          field="nombre" [dropdown]="true" [forceSelection]="true" (onSelect)="seleccionProveedor($event)" placeholder="Proveedor"></p-autoComplete>
      </div>
      <div class="p-field p-col-6">
        <p-autoComplete [(ngModel)]="grupo" [suggestions]="gruposFiltrados" (completeMethod)="filtradoGrupos($event)"
        field="nombre" [dropdown]="true" [forceSelection]="true" (onSelect)="seleccionGrupos($event)" placeholder="Grupo"></p-autoComplete>
      </div>
      <div class="p-field p-col-6">
          <p-autoComplete [(ngModel)]="rubro" [suggestions]="rubrosFiltrados" (completeMethod)="filtradoRubro($event)"
          field="nombre" [dropdown]="true" [forceSelection]="true" (onSelect)="seleccionRubro($event)" placeholder="Rubro"></p-autoComplete>
      </div>
        <div class="p-field p-col-6">
            <p-autoComplete [(ngModel)]="categoria" [suggestions]="categoriasFiltradas" (completeMethod)="filtradoCategoria($event)"
            field="nombre"v [dropdown]="true" [forceSelection]="true" (onSelect)="seleccionCategoria($event)" placeholder="Categoria"></p-autoComplete>
        </div>
        
        <div class="p-field p-col-6">
            <p-autoComplete [(ngModel)]="item" [suggestions]="itemsFiltrados" (completeMethod)="filtradoItems($event)"
            field="nombre" [forceSelection]="true" (onSelect)="seleccionItem($event)" placeholder="Producto/Servicio"></p-autoComplete>
        </div>
        <br/>
        <div class="p-field p-col-12 p-md-12">
            <p-button icon="fa fa-search" label="Buscar" (click)="filtrar()"></p-button>
        </div>

        <p-table [value]="items" dataKey="id" editMode="row" [columns]="cols" responsiveLayout="scroll" 
        styleClass="p-datatable-sm" selectionMode="single" (onRowSelect)="onRowSelect($event)">
            <ng-template pTemplate="header">
              <tr>
                <!--<th>
                </th>-->
                <th>Código
                </th>
                <th>Descripción
                </th>
                <th>Grupo</th>
                <th>Categoria</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Proveedor</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
              <tr [pEditableRow]="rowData" [pSelectableRow]="rowData">
                <!--<td>
                  <button pButton pInitEditableRow  (click)="itemSelec(rowData)" icon="fa fa-check" class="p-button-sm"></button>
                </td>-->
                <td>
                  {{rowData.codigo}}
                </td>
                <td>
                  {{rowData.nombre}}
                </td>
                <td>
                  Grupo
                </td>
                <td>
                    {{rowData.categoria.nombre}}
                </td>
                <td>
                    {{rowData.precioCosto}}
                </td>
                <td>
                    {{rowData.stock}}
                </td>
                <td>
                    {{rowData.proveedor.nombre}}
                </td>
              </tr>
            </ng-template>
          </p-table>


    </div> 
    <!-- Footer -->
    <p-footer>
      <div class="p-grid">
        <div class="p-col">
          <button pButton type="reset" class="button-cancel" (click)="display=false"  icon="fa fa-close" label="Cancelar"></button>
        </div>
        <div class="p-col">
          <button pButton type="submit" class="button-save p-d-block"  icon="fa fa-check" label="Abrir"></button>
        </div>
      </div>
    </p-footer>
</form>
   </p-dialog>
